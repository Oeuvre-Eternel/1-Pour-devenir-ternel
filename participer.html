<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Participer - L'≈íuvre √âternelle</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>üñäÔ∏è Participez √† L'≈íuvre √âternelle</h1>
        <p>Une seule contribution par personne.</p>
    </header>

    <main>
        <form id="participationForm">
            <label for="texte">Votre texte (max 500 caract√®res) :</label>
            <textarea id="texte" name="texte" maxlength="500" placeholder="√âcrivez votre message ici..."></textarea>

            <p class="ou">‚Äî OU ‚Äî</p>

            <label for="image">Votre image (max 2 Mo) :</label>
            <input type="file" id="image" name="image" accept="image/*">

            <button type="submit" class="btn">üì§ Envoyer ma contribution</button>
        </form>

        <a href="index.html" class="btn retour">‚¨Ö Retour</a>
    </main>

    <script>
        document.getElementById("participationForm").addEventListener("submit", function(e) {
            e.preventDefault();

            const image = document.getElementById("image").files[0];
            if (image && image.size > 2 * 1024 * 1024) {
                alert("L'image d√©passe 2 Mo !");
                return;
            }

            alert("Merci pour votre contribution !");
            window.location.href = "explorer.html";
        });
    </script>
</body>
</html>
<!-- Ton bouton de paiement -->
<button id="checkout-button">Payer 1‚Ç¨</button>

<!-- Script Stripe -->
<script src="https://js.stripe.com/v3/"></script>
<script>
  const stripe = Stripe("pk_test_51RtVb2JEj8phnxw0KarVHzHcdmJDg4gc8N1xQWlBnioSRgNGIgLbNaA0QQNDWQkqJ9vk4R6wY0YxHSCOop6oHjbo00WmXwDa0U");
  
  document.getElementById("checkout-button").addEventListener("click", async () => {
    const res = await fetch("/create-checkout-session", { method: "POST" });
    const data = await res.json();
    await stripe.redirectToCheckout({ sessionId: data.id });
  });
</script>
